<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cayson Tech Admin | 운영 콘솔</title>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Admin Styles -->
    <link rel="stylesheet" href="admin.css">
    
    <!-- Firebase SDKs (Compat version for simplicity without bundler) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <span class="logo-icon">🤖</span>
                <span class="logo-text">Cayson Admin</span>
            </div>
            
            <nav class="sidebar-menu">
                <div class="menu-category">MAIN</div>
                <a href="#" class="menu-item active" data-page="dashboard"><i class="fas fa-home"></i> Dashboard</a>
                
                <div class="menu-category">EDUCATION</div>
                <a href="#" class="menu-item" data-page="courses"><i class="fas fa-graduation-cap"></i> 교육 과정 관리</a>
                <a href="#" class="menu-item" data-page="students"><i class="fas fa-users"></i> 수강생 관리</a>
                
                <div class="menu-category">SUPPORT</div>
                <a href="#" class="menu-item" data-page="inquiries"><i class="fas fa-envelope"></i> 문의 · 컨설팅 <span class="badge" id="inquiryBadge">0</span></a>
                
                <div class="menu-category">SYSTEM</div>
                <a href="#" class="menu-item" data-page="cms"><i class="fas fa-edit"></i> 콘텐츠 (CMS)</a>
                <a href="#" class="menu-item" data-page="settings"><i class="fas fa-cog"></i> 설정</a>
            </nav>
            
            <div class="sidebar-footer">
                <a href="../index.html" class="menu-item" style="color:var(--text-muted); margin-bottom: 0.5rem; justify-content: flex-start; padding-left:0;">
                    <i class="fas fa-home" style="width:20px; text-align:center;"></i> 홈으로 이동
                </a>
                <button id="logoutBtn" class="logout-btn"><i class="fas fa-sign-out-alt"></i> 로그아웃</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="top-header">
                <div style="display:flex; align-items:center; gap:1rem;">
                    <button id="mobileMenuBtn" style="background:none; border:none; color:white; font-size:1.5rem; cursor:pointer; display:none;">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2 id="pageTitle">Main Dashboard</h2>
                </div>
                <div class="user-info">
                    <span class="admin-name">Admin</span>
                    <div class="admin-avatar">A</div>
                </div>
            </header>

            <!-- Dashboard View -->
            <div id="dashboardView" class="page-view active">
                <!-- Stat Cards -->
                <div class="stat-grid">
                    <div class="stat-card">
                        <div class="stat-icon icon-blue"><i class="fas fa-user-plus"></i></div>
                        <div class="stat-info">
                            <h3>오늘 신규 신청</h3>
                            <p class="stat-value" id="todayNewStudent">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon icon-purple"><i class="fas fa-chalkboard-teacher"></i></div>
                        <div class="stat-info">
                            <h3>진행 중 과정</h3>
                            <p class="stat-value" id="activeCourses">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon icon-red"><i class="fas fa-bell"></i></div>
                        <div class="stat-info">
                            <h3>미처리 문의</h3>
                            <p class="stat-value" id="pendingInquiries">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon icon-green"><i class="fas fa-check-circle"></i></div>
                        <div class="stat-info">
                            <h3>이번 달 수료</h3>
                            <p class="stat-value" id="monthlyGraduates">0</p>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity & Quick Actions -->
                <div class="dashboard-split">
                    <div class="card recent-activity">
                        <div class="card-header">
                            <h3>📋 최근 활동 로그</h3>
                        </div>
                        <div class="activity-list" id="activityList">
                            <!-- Activities will be loaded here -->
                            <div class="empty-state">최근 활동 내역이 없습니다.</div>
                        </div>
                    </div>
                    
                    <div class="card quick-actions">
                        <div class="card-header">
                            <h3>⚡ 빠른 작업</h3>
                        </div>
                        <div class="action-buttons">
                            <button class="action-btn"><i class="fas fa-plus"></i> 새 과정 등록</button>
                            <button class="action-btn"><i class="fas fa-pen"></i> 공지사항 작성</button>
                            <button class="action-btn"><i class="fas fa-file-export"></i> 수강생 명단 다운로드</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Other Views (Placeholders) -->
            <div id="coursesView" class="page-view">
                <div class="card">
                    <div class="card-header">
                        <h3>교육 과정 목록</h3>
                        <button class="btn-primary-sm">+ 과정 등록</button>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>과정명</th>
                                    <th>분류</th>
                                    <th>상태</th>
                                    <th>신청자</th>
                                    <th>관리</th>
                                </tr>
                            </thead>
                            <tbody id="courseTableBody">
                                <!-- JS populated -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div id="inquiriesView" class="page-view">
                <div class="card">
                    <div class="card-header">
                        <h3>문의 내역</h3>
                    </div>
                    <div class="inquiry-list" id="inquiryList">
                        <!-- JS populated -->
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- Login Modal (Overlay) -->
    <div id="loginOverlay" class="login-overlay">
        <div class="login-box">
            <div class="login-header">
                <h2>Admin Login</h2>
                <p>관리자 계정(Google)으로 접속하세요</p>
            </div>
            <div id="loginActions">
                <button id="googleLoginBtn" class="google-login-btn">
                    <i class="fab fa-google"></i> Google 계정으로 계속하기
                </button>
            </div>
            <p id="loginError" class="error-msg"></p>
            
            <div style="margin-top: 1.5rem; border-top: 1px solid var(--border); padding-top: 1.5rem;">
                <a href="../index.html" style="color: var(--text-muted); font-size: 0.9rem; text-decoration: none; display: flex; align-items: center; justify-content: center; gap: 0.5rem; transition: 0.3s;">
                    <i class="fas fa-arrow-left"></i> Cayson Tech 홈으로
                </a>
            </div>
        </div>
    </div>

    <script src="../js/firebase-config.js"></script>
    <!-- Admin Logic (Versioned) -->
    <script src="admin.js?v=final_fix_2"></script>
</body>
</html>
